{% extends 'base.html' %}
{% load static %} 
{% block content %}  
<!--begin::Content wrapper-->
<div class="d-flex flex-column flex-column-fluid">
    <!--begin::Toolbar-->
    <div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
        <!--begin::Toolbar container-->
        <div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
            <!--begin::Page title-->
            <div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
                <!--begin::Title-->
                <h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Histórico de atualizações</h1>
                <!--end::Title-->
                <!--begin::Breadcrumb-->
                <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">
                        <a href="../../demo1/dist/index.html" class="text-muted text-hover-primary">Home</a>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-400 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Central da Qualidade</li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-400 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Documentação</li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-400 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Padronização de Documentos</li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-400 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Solicitações</li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item">
                        <span class="bullet bg-gray-400 w-5px h-2px"></span>
                    </li>
                    <!--end::Item-->
                    <!--begin::Item-->
                    <li class="breadcrumb-item text-muted">Histórico de Atualizações</li>
                    <!--end::Item-->
                </ul>
                <!--end::Breadcrumb-->
            </div>
            <!--end::Page title-->
        </div>
        <!--end::Toolbar container-->
    </div>
    <!--end::Toolbar-->
    <!--begin::Content-->
    <div id="kt_app_content" class="app-content flex-column-fluid">
        <!--begin::Content container-->
        <div id="kt_app_content_container" class="app-container container-xxl">
            <!--begin::Timeline-->
            <div class="card">
                <!--begin::Card head-->
                <div class="card-header card-header-stretch">
                    <!--begin::Title-->
                    <div class="card-title d-flex align-items-center">
                        <i class="ki-duotone ki-calendar-8 fs-1 text-primary me-3 lh-0">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                            <span class="path4"></span>
                            <span class="path5"></span>
                            <span class="path6"></span>
                        </i>
                        <h3 class="fw-bold m-0 text-gray-800">Linha do Tempo</h3>
                    </div>
                    <!--end::Title-->
                    <!--begin::Toolbar-->
                    <div class="card-toolbar m-0">
                        <!--begin::Modal Button-->
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#kt_modal_upload">Incluir Comentário/Atualização</button>
                        <!--begin::Modal - New Target-->
                        <div class="modal fade" id="kt_modal_upload" tabindex="-1" aria-hidden="true">
                            <!--begin::Modal dialog-->
                            <div class="modal-dialog modal-dialog-centered mw-650px">
                                <!--begin::Modal content-->
                                <div class="modal-content rounded">
                                    <!--begin::Modal header-->
                                    <div class="modal-header pb-0 border-0 justify-content-end">
                                        <!--begin::Close-->
                                        <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
                                            <i class="ki-duotone ki-cross fs-1">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                            </i>
                                        </div>
                                        <!--end::Close-->
                                    </div>
                                    <!--begin::Modal header-->
                                    <!--begin::Modal body-->
                                    <div class="modal-body scroll-y px-10 px-lg-15 pt-0 pb-15">
                                        <!--begin:Form-->
                                        <form action="" method="POST" enctype="multipart/form-data" class="getForm" id="solicitarPadronizacaoForm">
                                            {% csrf_token %}
                                            <input type="hidden" name="_method" value="INCLUSAO">
                                        
                                            <div class="mb-13 text-center">
                                                <h1 class="mb-3">Inclusão de Comentário/Atualização</h1>
                                            </div>
                                        
                                            <div class="d-flex flex-column mb-8">
                                                <label for="descricaoDocumento" class="fs-6 fw-semibold mb-2">Descreva o comentário ou atualização:</label>
                                                <textarea id="descricaoDocumento" class="form-control form-control-solid" name="descricao" placeholder="Digite aqui sua atualização/comentário" required></textarea>
                                            </div>

                                        
                                            <div class="d-flex flex-column mb-8">
                                                <label for="arquivos" class="fs-6 fw-semibold mb-2">Anexar Arquivo:</label>
                                                <input type="file" id="arquivos" class="form-control form-control-solid" name="documento" accept=".doc, .pdf, .xlsx" />
                                            </div>
                                        
                                            <div class="text-center">
                                                <button type="reset" id="kt_modal_rename_folder_cancel" class="btn btn-light me-3">Limpar</button>
                                                <button type="submit" id="kt_modal_rename_folder_submit" class="btn btn-primary">
                                                    <span class="indicator-label">Incluir</span>
                                                    <span class="indicator-progress">Aguarde...
                                                        <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                                    </span>
                                                </button>
                                            </div>
                                        </form>
                                        
                                        <!--end:Form-->
                                    </div>
                                    <!--end::Modal body-->

                                </div>
                                <!--end::Modal content-->
                            </div>
                            <!--end::Modal dialog-->
                        </div>
                        <!--end::Modal - New Target-->
                        <!--end::Modal Button-->
                    </div>
                    <!--end::Toolbar-->
                    <!--begin::Progress Bar-->
                    <div class="d-flex justify-content-between fw-bold fs-6 text-white opacity-75 w-100 mt-auto mb-2">
<!--                         <span>43 Pending</span>
                        <span>72%</span> -->
                    </div>
                    <div class="h-8px mx-3 w-100 bg-white bg-opacity-50 rounded">
                        <!-- <div class="bg-white rounded h-8px" role="progressbar" style="width: 72%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div> -->
                    </div>
                    <!--end::Progress Bar-->
                </div>
                <!--end::Card head-->

                <!--begin::Card body-->
                <div class="card-body">
                    <!--begin::Tab Content-->
                    <div class="tab-content">
                        <!--begin::Tab panel-->
                        <div id="kt_activity_today" class="card-body p-0 tab-pane fade show active" role="tabpanel" aria-labelledby="kt_activity_today_tab">
                            <!--begin::Timeline-->
                            <div class="timeline">
                                {% for timeline in timelines %}
                                <!--begin::Timeline item-->
                                <div class="timeline-item">
                                    <!--begin::Timeline line-->
                                    <div class="timeline-line w-40px"></div>
                                    <!--end::Timeline line-->
                                    <!--begin::Timeline icon-->
                                    <div class="timeline-icon symbol symbol-circle symbol-40px me-4">
                                        <div class="symbol-label bg-light">
                                            <i class="ki-duotone ki-{{timeline.icone}} fs-2 text-gray-500">
                                                <span class="path1"></span>
                                                <span class="path2"></span>
                                                <span class="path3"></span>
                                            </i>
                                        </div>
                                    </div>
                                    <!--end::Timeline icon-->
                                    <!--begin::Timeline content-->
                                    <div class="timeline-content mb-10 mt-n1">
                                        <!--begin::Timeline heading-->
                                        <div class="pe-3 mb-5">
                                            <!--begin::Title-->
                                            <div class="fs-5 fw-semibold mb-2">{{timeline.tp_requisicao}} : {{timeline.comentario}}</div>
                                            <!--end::Title-->
                                            <!--begin::Description-->
                                            <div class="d-flex align-items-center mt-1 fs-6">
                                                <!--begin::Info-->
                                                <div class="text-muted me-2 fs-7">Criado no dia: {{timeline.created_at}} por {{timeline.usuario}}</div>
                                                <!--end::Info-->
                                            </div>
                                            <!--end::Description-->
                                        </div>
                                        <!--end::Timeline heading-->
                                        {% if timeline.tipo == 1 %}
                                        <!--begin::Timeline details-->
                                        <div class="overflow-auto pb-5">
                                            <div class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5">
                                                <!--begin::Item-->
                                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                                    <!--begin::Icon-->
                                                    <img alt="" class="w-30px me-3" src="{% static 'media/svg/files/upload.svg' %}" />
                                                    <!--end::Icon-->
                                                    <!--begin::Info-->
                                                    <div class="ms-1 fw-semibold">
                                                        <!--begin::Desc-->
                                                        <a href="{{solicitacao.arquivo}}" class="fs-6 text-hover-primary fw-bold" target="_blank">
                                                            {{solicitacao.nm_doc}}
                                                        <div class="text-gray-400">Clique aqui para visualizar o documento</div>
                                                            
                                                        </a>
                                                        <!--end::Desc-->
                                                        <!--begin::Number-->
                                                        <!--end::Number-->
                                                    </div>
                                                    <!--begin::Info-->
                                                </div>
                                                <!--end::Item-->
                                            </div>
                                        </div>
                                        <!--end::Timeline details-->
                                        {% endif %}
                                        {% if timeline.tipo == 2 %}
                                        {% endif %}
                                        {% if timeline.tipo == 3 %}
                                        {% endif %}
                                        {% if timeline.tipo == 4 %}
                                        {% endif %}
                                        {% if timeline.tipo == 5 %}
                                        <!--begin::Timeline details-->
                                        <div class="overflow-auto pb-5">
                                            <div class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5">
                                                <!--begin::Item-->
                                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                                    <!--begin::Icon-->
                                                    <img alt="" class="w-30px me-3" src="{% static 'media/svg/files/upload.svg' %}" />
                                                    <!--end::Icon-->
                                                    <!--begin::Info-->
                                                    <div class="ms-1 fw-semibold">
                                                        <!--begin::Desc-->
                                                        <a href="{{timeline.arquivo}}" class="fs-6 text-hover-primary fw-bold" target="_blank">
                                                            {{solicitacao.nm_doc}}
                                                        <div class="text-gray-400">Clique aqui para visualizar o documento</div>
                                                            
                                                        </a>
                                                        <!--end::Desc-->
                                                        <!--begin::Number-->
                                                        <!--end::Number-->
                                                    </div>
                                                    <!--begin::Info-->
                                                </div>
                                                <!--begin::Action-->
                                                <div class="min-w-125px pe-2">
                                                    <a href="#" class="btn btn-sm btn-light btn-active-light-primary" data-bs-toggle="modal" data-bs-target="#kt_modal{{timeline.id}}">Aprovar Documento</a>
                                                </div>
                                                <div class="modal fade" tabindex="-1" id="kt_modal{{timeline.id}}">
                                                    <div class="modal-dialog">
                                                        <form action="" method="POST" enctype="multipart/form-data" class="getForm">
                                                            {% csrf_token %}
                                                            <input type="hidden" name="_method" value="APROV">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h3 class="modal-title">Deseja aprovar o documento?</h3>
                                                                    
                                                                    <!--begin::Close-->
                                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                                    <!--end::Close-->
                                                                </div>
                                                                
                                                                <div class="modal-body">
                                                                    <label for="approvalComments" class="form-label">Comentários de Aprovação:</label>
                                                                    <textarea class="form-control" id="approvalComments" name="descricao" rows="3"></textarea>
                                                                </div>
                                                                
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                                                    <button type="submit" class="btn btn-success disableOnSubmit">
                                                                        <i class="fas fa-check-circle"></i> Aprovar Documento
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                                
                                                <!--end::Action-->
                                                <!--end::Item-->
                                            </div>
                                        </div>
                                        <!--end::Timeline details-->
                                        {% endif %}
                                        {% if timeline.tipo == 6 %}

                                        {% endif %}
                                        {% if timeline.tipo == 7 %}

                                        {% endif %}
                                        {% if timeline.tipo == 8 %}
                                        <!--begin::Timeline details-->
                                        <div class="overflow-auto pb-5">
                                            <div class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5">
                                                <!--begin::Item-->
                                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                                    <!--begin::Icon-->
                                                    <img alt="" class="w-30px me-3" src="{% static 'media/svg/files/upload.svg' %}" />
                                                    <!--end::Icon-->
                                                    <!--begin::Info-->
                                                    <div class="ms-1 fw-semibold">
                                                        <!--begin::Desc-->
                                                        <a href="{{solicitacao.arquivo}}" class="fs-6 text-hover-primary fw-bold" target="_blank">
                                                            {{solicitacao.nm_doc}}
                                                        <div class="text-gray-400">Clique aqui para visualizar o documento</div>
                                                            
                                                        </a>
                                                        <!--end::Desc-->
                                                        <!--begin::Number-->
                                                        <!--end::Number-->
                                                    </div>
                                                    <!--begin::Info-->
                                                </div>
                                                <!--end::Item-->
                                            </div>
                                        </div>
                                        <!--end::Timeline details-->
                                        {% endif %}
                                        {% if timeline.tipo == 9 %}
                                        <!--begin::Timeline details-->
                                        {% if timeline.arquivo == null %}
                                        {% else %}
                                        <!--begin::Timeline details-->
                                        <div class="overflow-auto pb-5">
                                            <div class="d-flex align-items-center border border-dashed border-gray-300 rounded min-w-700px p-5">
                                                <!--begin::Item-->
                                                <div class="d-flex flex-aligns-center pe-10 pe-lg-20">
                                                    <!--begin::Icon-->
                                                    <img alt="" class="w-30px me-3" src="{% static 'media/svg/files/upload.svg' %}" />
                                                    <!--end::Icon-->
                                                    <!--begin::Info-->
                                                    <div class="ms-1 fw-semibold">
                                                        <!--begin::Desc-->
                                                        <a href="{{timeline.arquivo}}" class="fs-6 text-hover-primary fw-bold" target="_blank">
                                                            Documento de atualização
                                                        <div class="text-gray-400">Clique aqui para visualizar o documento</div>
                                                            
                                                        </a>
                                                        <!--end::Desc-->
                                                        <!--begin::Number-->
                                                        <!--end::Number-->
                                                    </div>
                                                    <!--begin::Info-->
                                                </div>
                                                <!--end::Item-->
                                            </div>
                                        </div>
                                        <!--end::Timeline details-->
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                    <!--end::Timeline content-->
                                </div>
                                <!--end::Timeline item-->
                                {% endfor %}
                            </div>
                            <!--end::Timeline-->
                        </div>
                        <!--end::Tab panel-->
                    </div>
                    <!--end::Tab Content-->
                </div>
                <!--end::Card body-->
            </div>
            <!--end::Timeline-->
        </div>
        <!--end::Content container-->
    </div>
    <!--end::Content-->
</div>
<!--end::Content wrapper-->
<!--begin::Global Javascript Bundle(mandatory for all pages)-->
<script src="{% static 'plugins/global/plugins.bundle.js' %}"></script>
<script src="{% static 'js/scripts.bundle.js' %}"></script>
<!--end::Global Javascript Bundle-->
<!--begin::Vendors Javascript(used for this page only)-->
<script src="{% static 'plugins/custom/datatables/datatables.bundle.js' %}"></script>
<!--end::Vendors Javascript-->
<!--begin::Custom Javascript(used for this page only)-->
<script src="{% static 'js/custom/pages/user-profile/general.js' %}"></script>
<script src="{% static 'js/widgets.bundle.js' %}"></script>
<script src="{% static 'js/custom/apps/chat/chat.js' %}"></script>
<script src="{% static 'js/custom/utilities/modals/upgrade-plan.js' %}"></script>
<script src="{% static 'js/custom/utilities/modals/create-campaign.js' %}"></script>
<script src="{% static 'js/custom/utilities/modals/users-search.js' %}"></script>
<!--end::Custom Javascript-->

{% endblock %}